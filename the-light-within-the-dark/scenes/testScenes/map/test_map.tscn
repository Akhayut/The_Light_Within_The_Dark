[gd_scene load_steps=32 format=3 uid="uid://y5dr0mrt3cpq"]

[ext_resource type="Shader" uid="uid://cdcv6y6ha7423" path="res://scripts/shaders/lightShader.tres" id="1_gel5x"]
[ext_resource type="Script" uid="uid://diwgrijnhwsup" path="res://scripts/scripts/maps/lightScript.gd" id="2_3402l"]
[ext_resource type="Texture2D" uid="uid://cbccmnn35tpnx" path="res://scenes/testScenes/map/b1.png" id="2_h0snl"]
[ext_resource type="PackedScene" uid="uid://bprhxiyrb2abh" path="res://scenes/testScenes/character/bangleBerry.tscn" id="2_usc7c"]
[ext_resource type="Script" uid="uid://nkfodtldtxfy" path="res://scripts/scripts/maps/test_map.gd" id="2_xhk64"]
[ext_resource type="Texture2D" uid="uid://b0ifdes17luox" path="res://scenes/testScenes/map/b2.png" id="3_kkc62"]
[ext_resource type="Texture2D" uid="uid://dxsn6yqj0j77a" path="res://scenes/testScenes/map/b3.png" id="4_7bbnb"]
[ext_resource type="Texture2D" uid="uid://cox87c41lcfwr" path="res://scenes/testScenes/map/b4V1.png" id="5_xhk64"]
[ext_resource type="Texture2D" uid="uid://dgqgdt0c7d2mt" path="res://scenes/testScenes/map/table1ZoomIn.png" id="6_l6mwb"]
[ext_resource type="Texture2D" uid="uid://d1rtq1mpsl6m3" path="res://assets/Prism Piece One Sprite.png" id="9_uh1y4"]
[ext_resource type="Texture2D" uid="uid://c31i6707yle5n" path="res://assets/Second Prism Piece Sprite.png" id="10_powqp"]
[ext_resource type="Texture2D" uid="uid://cv3ohh8pwenk0" path="res://assets/Third Prism Piece Sprite (but fr).png" id="11_xhk64"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3402l"]
shader = ExtResource("1_gel5x")
shader_parameter/aspect = 0.0
shader_parameter/mousePos = Vector2(0, 0)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_gel5x"]
shader = ExtResource("1_gel5x")
shader_parameter/aspect = 0.0
shader_parameter/mousePos = Vector2(0, 0)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ov5kr"]
size = Vector2(104, 12)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lh3fa"]
size = Vector2(59, 11)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r5bbk"]
size = Vector2(38.5, 8.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_oaykk"]
size = Vector2(65, 85.125)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xhk64"]
size = Vector2(244, 21)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_l6mwb"]
size = Vector2(5, 32)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_b2ebj"]
size = Vector2(37, 37.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6yrvl"]
size = Vector2(3.0942025, 11.087036)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kkc62"]
size = Vector2(32, 12)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7bbnb"]
size = Vector2(32, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_uh1y4"]
size = Vector2(31, 36)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bjksw"]
size = Vector2(25, 60)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_usc7c"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_powqp"]
size = Vector2(20, 30.75)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6fiwy"]
size = Vector2(20, 68)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0u7x3"]
size = Vector2(42, 46.25)

[sub_resource type="LabelSettings" id="LabelSettings_xhk64"]

[node name="test map" type="Node2D"]
material = SubResource("ShaderMaterial_3402l")
script = ExtResource("2_xhk64")

[node name="tutorialBackround1" type="Sprite2D" parent="."]
position = Vector2(160, 90)
texture = ExtResource("2_h0snl")
vframes = 2

[node name="tutorialBackround2" type="Sprite2D" parent="."]
position = Vector2(-159, 89)
texture = ExtResource("3_kkc62")
vframes = 2

[node name="B3" type="Sprite2D" parent="."]
position = Vector2(480, 90)
texture = ExtResource("4_7bbnb")
vframes = 2

[node name="B4v1" type="Sprite2D" parent="."]
position = Vector2(480, -90)
texture = ExtResource("5_xhk64")
vframes = 2

[node name="Table1ZoomIn" type="Sprite2D" parent="."]
position = Vector2(160, -90)
texture = ExtResource("6_l6mwb")

[node name="shader" type="CanvasLayer" parent="."]

[node name="shaderBox" type="ColorRect" parent="shader"]
visible = false
material = SubResource("ShaderMaterial_gel5x")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
color = Color(0, 0, 0, 0)
script = ExtResource("2_3402l")

[node name="permanentWallsWithCollision" type="StaticBody2D" parent="."]
collision_layer = 2
collision_mask = 7

[node name="shelfCollsion1" type="CollisionShape2D" parent="permanentWallsWithCollision"]
position = Vector2(-57, 90)
shape = SubResource("RectangleShape2D_ov5kr")

[node name="shelfCollision2" type="CollisionShape2D" parent="permanentWallsWithCollision"]
position = Vector2(-171.5, 89.5)
shape = SubResource("RectangleShape2D_lh3fa")

[node name="shelfCollision3" type="CollisionShape2D" parent="permanentWallsWithCollision"]
position = Vector2(-254.25, 89.25)
shape = SubResource("RectangleShape2D_r5bbk")

[node name="rubbleCollision1" type="CollisionShape2D" parent="permanentWallsWithCollision"]
position = Vector2(-275.5, 136.563)
shape = SubResource("RectangleShape2D_oaykk")

[node name="wallCollisionRooms1&2" type="CollisionPolygon2D" parent="permanentWallsWithCollision"]
build_mode = 1
polygon = PackedVector2Array(4, 143, 3, 15, 316, 15, 316, 143, 320, 108, 320, 0, 277.06833, 0, -320, 0, -319, 182, 320, 182, 320, 178, -316, 176, -314, 3, -3, 3, -3, 143)

[node name="shelfCollision4" type="CollisionShape2D" parent="permanentWallsWithCollision"]
position = Vector2(-191, 35.5)
shape = SubResource("RectangleShape2D_xhk64")

[node name="invisibleWall1" type="CollisionShape2D" parent="permanentWallsWithCollision"]
position = Vector2(-200.5, 67)
shape = SubResource("RectangleShape2D_l6mwb")

[node name="CollisionShape2D" type="CollisionShape2D" parent="permanentWallsWithCollision"]
position = Vector2(564, -82)
shape = SubResource("RectangleShape2D_b2ebj")

[node name="prismPuzzleArea" type="Area2D" parent="permanentWallsWithCollision"]
collision_layer = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="permanentWallsWithCollision/prismPuzzleArea"]
position = Vector2(564, -82)
scale = Vector2(17.775152, 4.690162)
shape = SubResource("RectangleShape2D_6yrvl")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="permanentWallsWithCollision"]
polygon = PackedVector2Array(0, 0, 320, 0, 333, 0, 333, -176, 316, -176, 316, -4, 4, -4, 4, -176, 315, -176, 315, -180, 0, -180)

[node name="shelfEnterable1" type="StaticBody2D" parent="."]
collision_layer = 8

[node name="shelfEnterableCollision1" type="CollisionShape2D" parent="shelfEnterable1"]
position = Vector2(-125, 90)
shape = SubResource("RectangleShape2D_kkc62")

[node name="shelfEnterableCollision2" type="CollisionShape2D" parent="shelfEnterable1"]
position = Vector2(-218, 89)
shape = SubResource("RectangleShape2D_7bbnb")

[node name="bigDieAreas" type="Area2D" parent="."]

[node name="bigDiePit" type="CollisionShape2D" parent="bigDieAreas"]
position = Vector2(-218.5, 65)
shape = SubResource("RectangleShape2D_uh1y4")
debug_color = Color(0.996078, 0, 0, 0.419608)

[node name="ladder1Area" type="Area2D" parent="."]
position = Vector2(-125, 90)

[node name="CollisionShape2D" type="CollisionShape2D" parent="ladder1Area"]
position = Vector2(-104.5, 55)
shape = SubResource("RectangleShape2D_bjksw")

[node name="StaticBody2D" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(175, 46)
shape = SubResource("RectangleShape2D_usc7c")

[node name="ColorRect" type="ColorRect" parent="StaticBody2D"]
offset_left = 165.0
offset_top = 36.0
offset_right = 185.0
offset_bottom = 56.0
color = Color(0.46807, 2.52686e-06, 0.300209, 1)

[node name="prismPieceOne" type="CharacterBody2D" parent="."]
position = Vector2(253, -103)

[node name="prism1" type="Sprite2D" parent="prismPieceOne"]
position = Vector2(43, -37)
scale = Vector2(5, 5)
texture = ExtResource("9_uh1y4")

[node name="prismPieceTwo" type="CharacterBody2D" parent="."]
position = Vector2(155, -42)

[node name="prism2" type="Sprite2D" parent="prismPieceTwo"]
position = Vector2(-1, -25)
scale = Vector2(5, 5)
texture = ExtResource("10_powqp")

[node name="prismPieceThree" type="CharacterBody2D" parent="."]
position = Vector2(83, -137)

[node name="prism3" type="Sprite2D" parent="prismPieceThree"]
position = Vector2(2, 15)
scale = Vector2(5, 5)
texture = ExtResource("11_xhk64")

[node name="bangleBerry" parent="." instance=ExtResource("2_usc7c")]
position = Vector2(105, 102)
scale = Vector2(0.61, 0.61)
collision_mask = 14

[node name="camera colider" type="Area2D" parent="."]
collision_layer = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="camera colider"]
position = Vector2(1, 159)
shape = SubResource("RectangleShape2D_powqp")

[node name="camera collider 2" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="camera collider 2"]
position = Vector2(331, 144)
shape = SubResource("RectangleShape2D_6fiwy")

[node name="camera collider 3" type="Area2D" parent="."]
position = Vector2(331, 144)

[node name="CollisionShape2D" type="CollisionShape2D" parent="camera collider 3"]
position = Vector2(148, -142.125)
shape = SubResource("RectangleShape2D_0u7x3")

[node name="playerCam" type="Camera2D" parent="."]
anchor_mode = 0

[node name="CanvasLayer" type="CanvasLayer" parent="playerCam"]
layer = 7

[node name="Label" type="Label" parent="playerCam/CanvasLayer"]
z_index = 10
anchors_preset = 9
anchor_bottom = 1.0
offset_left = 1.0
offset_top = 154.0
offset_right = 318.0
offset_bottom = -3.0
grow_vertical = 2
label_settings = SubResource("LabelSettings_xhk64")
horizontal_alignment = 1
vertical_alignment = 2

[connection signal="body_entered" from="permanentWallsWithCollision/prismPuzzleArea" to="." method="_on_prism_puzzle_area_body_entered"]
[connection signal="body_entered" from="camera colider" to="." method="_on_camera_colider_body_entered"]
[connection signal="body_entered" from="camera collider 2" to="." method="_on_camera_collider_2_body_entered"]
[connection signal="body_entered" from="camera collider 3" to="." method="_on_camera_collider_3_body_entered"]
